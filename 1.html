<script>

var data = '<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">' +
           '<foreignObject width="100%" height="100%">' +
           '<div xmlns="http://www.w3.org/1999/xhtml" style="font-size:30px">' +
             '<em>I</em> like ' +
             '<span style="color:white; text-shadow:0 0 2px blue;">' +
             'cheese</span>' +
           '</div>' +
           '</foreignObject>' +
           '</svg>';
    
 data = encodeURIComponent(data);

 
var img = new Image();

img.onload = function() {
  ctx.drawImage(img, 0, 0);
  console.log(canvas.toDataURL());
 
  canvas.toBlob(function(blob) {
     var newImg = document.createElement('img'),
     url = URL.createObjectURL(blob);

     newImg.onload = function() {
     // no longer need to read the blob so it's revoked
     URL.revokeObjectURL(url);
   };

   newImg.src = url;
   document.body.appendChild(newImg);
 });
}

img.src = "data:image/svg+xml," + data

</script>
